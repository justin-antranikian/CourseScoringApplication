
<div *ngIf="eventsBreadcrumbResult" class="mb-3">
  <app-events-bread-crumb [breadcrumbResult]="eventsBreadcrumbResult" [breadcrumbLocation]="breadcrumbLocation"></app-events-bread-crumb>
</div>

<hr />

<div class="row" *ngIf="race$ | async as race">
  <div class="col-lg-2">
    <div><img width="120px" height="120px" [src]="race.raceSeriesImageUrl"></div>
    <div class="mt-4 font-24 font-weight-bold">{{race.raceName}}</div>
    <div class="font-18 primary-color font-weight-bold">All Courses</div>

    <div class="font-14">
      <div>{{race.locationInfoWithRank.city}}, {{race.locationInfoWithRank.state}}</div>
      <div class="font-weight-bold">{{race.raceKickOffDate}}</div>
    </div>

    <hr />
    <app-location-info-rankings [locationInfoWithRank]="race.locationInfoWithRank" [useEventsNavigation]="false"></app-location-info-rankings>

    <hr />
    <div class="font-12 font-weight-bold font-italic">- "{{race.raceSeriesDescription}}"</div>

  </div>
  <div class="col-lg-10">

    <div class="row mb-5">
      <div class="col-7">
      </div>
      <div class="col-5">
        <app-irps-search [raceId]="raceId"></app-irps-search>
      </div>
    </div>

    <div class="mb-5" *ngFor="let leaderboard of race.leaderboards">
      <div class="font-24 primary-color font-weight-bold">{{leaderboard.courseName}}</div>

      <table class="table">
        <thead>
          <tr>
            <th style="width: 5%"></th>
            <th style="width: 5%"></th>
            <th style="width: 15%">Bib</th>
            <th style="width: 20%">Name</th>
            <th style="width: 10%">Overall</th>
            <th style="width: 10%">Gender</th>
            <th style="width: 10%">Division</th>
            <th style="width: 15%">Time</th>
            <th style="width: 10%">Pace</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let leaderboardResult of leaderboard.results">
            <td class="text-left"><a [routerLink]="[IndividualResultPage, leaderboardResult.athleteCourseId]">View</a></td>

            <td>
              <i class="fa fa-plus-circle" title="view more" style="cursor: pointer;" (click)="onViewIrpClicked(leaderboardResult)" ></i>
            </td>

            <td>
              <span class="font-24 badge text-bg-dark" title="bib">{{leaderboardResult.bib}}</span>
            </td>
            <td>
              <div>
                <a class="font-weight-bold background-secondary" style="color: black;" [routerLink]="[AthletePage, leaderboardResult.athleteId]">{{leaderboardResult.fullName}}</a>
              </div>
              <div>{{leaderboardResult.genderAbbreviated}} | {{leaderboardResult.raceAge}}</div>
            </td>
            <td class="font-24 font-weight-bold text-secondary">{{leaderboardResult.overallRank}}</td>
            <td class="font-24 font-weight-bold text-secondary">{{leaderboardResult.genderRank}}</td>
            <td class="font-24 font-weight-bold text-secondary">{{leaderboardResult.divisionRank}}</td>
            <td class="font-24 font-weight-bold">{{leaderboardResult.paceWithTimeCumulative.timeFormatted}}</td>
            <td>
              <div class="font-24 font-weight-bold">{{leaderboardResult.paceWithTimeCumulative.paceValue || '--'}}</div>
              {{leaderboardResult.paceWithTimeCumulative.paceLabel}}
            </td>
          </tr>
        </tbody>
      </table>

      <div class="my-5" style="text-align: right;">
        <a class="btn btn-outline-secondary" [routerLink]="[CourseLeaderboardPage, leaderboard.courseId]">View All</a>
      </div>
    </div>

  </div>
</div>
