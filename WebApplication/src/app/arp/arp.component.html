
<div *ngIf="$arp | async as arp" class="mb-3">
  <app-athlete-bread-crumb
    [breadcrumbResult]="athletesBreadcrumbResult"
    [breadcrumbLocation]="breadcrumbLocation"
    [titleOverride]="arp.fullName">
  </app-athlete-bread-crumb>
</div>

<hr />

<div *ngIf="$arp | async as arp" class="row">
  <div class="col-lg-3">
    <div><img width="120px" height="120px" src="/assets/img/Athlete.png"></div>
    <div class="mt-4 font-24 font-weight-bold">{{arp.fullName}}</div>
    <div class="font-18">{{arp.locationInfoWithRank.city}}, {{arp.locationInfoWithRank.state}}</div>
    <div class="font-12">{{arp.genderAbbreviated}} | {{arp.age}}</div>

    <hr />
    <app-location-info-rankings [locationInfoWithRank]="arp.locationInfoWithRank" [useEventsNavigation]="false"></app-location-info-rankings>

    <hr />
    <div class="mb-1" *ngFor="let tag of arp.tags">
      <span class="font-20 badge badge-primary primary-background">{{tag}}</span>
    </div>

    <hr />
    <div>{{arp.firstName}}'s training and diet</div>
    <ul class="mt-3">
      <li class="font-12" *ngFor="let wellnessEntry of arp.wellnessTrainingAndDiet">{{wellnessEntry.description}}</li>
    </ul>

    <hr />
    <div>{{arp.firstName}}'s goals</div>
    <div class="mt-3 font-12 font-italic" *ngFor="let wellnessEntry of arp.wellnessGoals">
      "{{wellnessEntry.description}}"
    </div>

    <hr />
    <div>{{arp.firstName}}'s gear</div>
    <ul class="mt-3">
      <li class="font-12" *ngFor="let wellnessEntry of arp.wellnessGearList">{{wellnessEntry.description}}</li>
    </ul>

    <hr />
    <div>{{arp.firstName}}'s inspiration</div>
    <div class="mt-3 primary-color font-12 font-weight-bold font-italic" *ngFor="let wellnessEntry of arp.wellnessMotivationalList">
      "{{wellnessEntry.description}}"
    </div>
  </div>
  <div class="col-lg-9">
    <div class="font-20 font-weight-bold">Stats</div>

    <div class="my-5 row">
      <div class="col-4">
        <div class="mb-4" *ngFor="let goal of arp.goals">
          <div (click)="onViewGoalsClicked(goalsModal, goal)" class="font-weight-bold" style="cursor: pointer;">{{goal.raceSeriesTypeName}}</div>
          <div class="font-12">Completed: <strong>{{goal.actualTotal}}</strong> of <strong>{{goal.goalTotal}}</strong> events</div>
          <div class="pr-3" placement="top" ngbTooltip="distance completed: {{goal.totalDistance}} ">
            <ngb-progressbar type="success" [value]="goal.percentComplete" [striped]="true"></ngb-progressbar>
          </div>
        </div>
      </div>
    </div>
    <hr />
    <div class="font-20 font-weight-bold">Results</div>

    <table class="my-5 table">
      <thead>
        <tr>
          <th style="width: 5%" scope="col"></th>
          <th style="width: 15%" scope="col"></th>
          <th style="width: 30%" class="text-left" scope="col">Event Name</th>
          <th style="width: 10%" scope="col">Overall</th>
          <th style="width: 10%" scope="col">Gender</th>
          <th style="width: 10%" scope="col">Division</th>
          <th style="width: 20%" scope="col">Total Time</th>
        </tr>
      </thead>
      <tbody>
        @for (result of arp.results; track result) {
          <tr style="height: 85px;" app-arp-result [arpResultDto]="result"></tr>
        }
      </tbody>
    </table>

  </div>
</div>

<ng-template #goalsModal let-modal let-arp="arp">

  <div class="modal-header">
    <h4 class="modal-title">{{selectedGoal.raceSeriesTypeName}} events</h4>
    <button type="button" class="close" aria-label="Close" (click)="modal.dismiss()">
      <span aria-hidden="true">&times;</span>
    </button>
  </div>
  <div style="max-height: 325px; overflow-y: scroll;" class="modal-body">
    <div class="mb-4" *ngFor="let course of selectedGoal.courses">
      <div>
        <a class="font-24 font-weight-bold" style="color: black;" (click)="modal.close('Close click')" [routerLink]="[RaceLeaderboardPage, course.raceId]">
          {{course.raceName}}
        </a>
      </div>
      <div>
        <a class="font-18 primary-color font-weight-bold" (click)="modal.close('Close click')" [routerLink]="[CourseLeaderboardPage, course.courseId]">
          {{course.courseName}}
        </a>
      </div>
      <div class="font-14">{{course.raceSeriesCity}}, {{course.raceSeriesState}}</div>
      <div class="font-12 font-italic font-weight-bold">- "{{course.raceSeriesDescription}}"</div>
    </div>
  </div>
  <div class="modal-footer">
    <button type="button" class="btn btn-light" (click)="modal.close('Close click')">Close</button>
  </div>

</ng-template>